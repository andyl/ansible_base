---

# ghostty 

- name: create pkg directories 
  file: 
    path: "/home/{{gen_user}}/.pkg/ghostty"
    state: directory 
    group: "{{gen_user}}"
    owner: "{{gen_user}}"

- name: install support packages 
  become: true
  apt:  pkg={{item}} state=latest install_recommends=yes
  with_items:
    - libgtk-4-dev 
    - libadwaita-1-dev 

# ----- DEBFILE METHOD -----

- name: get ghostty deb file
  get_url:
    url:  https://github.com/mkasberg/ghostty-ubuntu/releases/download/{{gho.vsn}}-{{gho.ppa}}/ghostty_{{gho.vsn}}.{{gho.ppa}}_amd64_{{ansible_distribution_version}}.deb
    dest: /home/{{gen_user}}/.pkg/ghostty/ghostty_{{gho.vsn}}_{{ansible_distribution_version}}.deb
    group: "{{gen_user}}"
    owner: "{{gen_user}}"

- name: install ghostty package 
  apt: deb=/home/{{gen_user}}/.pkg/ghostty/ghostty_{{gho.vsn}}_{{ansible_distribution_version}}.deb

# ----- APPIMAGE METHOD -----

# https://github.com/pkgforge-dev/ghostty-appimage 
# https://github.com/pkgforge-dev/ghostty-appimage/releases

# - name: get ghostty appimage file
#   get_url:
#     url:  https://github.com/pkgforge-dev/ghostty-appimage/releases/download/v{{ghovsn}}/Ghostty-{{ghovsn}}-x86_64.AppImage
#     dest: /home/{{gen_user}}/.pkg/ghostty/ghostty_{{ghovsn}}.appimage
#     group: "{{gen_user}}"
#     owner: "{{gen_user}}"
#     mode:  "a+rx"
#
# - name: remove old ghostty 
#   become: true
#   file:
#     dest:   /usr/bin/ghostty
#     state:  absent
#     force:  yes
#
# - name: create appimage symlink 
#   file:
#     src:  /home/{{gen_user}}/.pkg/ghostty/ghostty_{{ghovsn}}.appimage
#     dest: /usr/local/bin/ghostty
#     state: link 
#     force: yes
#     mode:  "a+rx"

# ----- NOTES 
#
# - ghostty desktop file | ~/util/code_util/cfg/+local/share/^applications 
# - ghostty icon file    | ~/util/code_util/cfg/+local/share/^icons

